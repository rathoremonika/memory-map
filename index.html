<!DOCTYPE html>
<html>
<head>
    <title>Shashwat's Character Arc ðŸ“–</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <style>
        /* --- VIBRANT PARTY THEME --- */
        body { 
            margin: 0; padding: 0; 
            font-family: 'Nunito', sans-serif; 
            overflow: hidden; 
            background: #000;
        }
        
        /* 1. FULL SCREEN MAP */
        #map-background {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 1;
        }

        /* 2. FLOATING STORY CARD */
        #story-card-container {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -45%);
            width: 90%; max-width: 450px;
            z-index: 10;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 25px;
            border-radius: 30px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.4);
            border: 4px solid rgba(255,255,255,0.6);
            text-align: center;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
        }

        /* --- TYPOGRAPHY --- */
        .chapter-header {
            font-family: 'Fredoka One', cursive; 
            color: #6c5ce7; 
            font-size: 1.5rem; 
            letter-spacing: 1px;
            margin-top: 5px; margin-bottom: 15px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.05);
            text-transform: uppercase;
        }

        /* --- EVIDENCE MEDIA (SMART FIT) --- */
        .media-container {
            width: 100%; height: 280px; 
            display: flex; justify-content: center; align-items: center; 
            margin-bottom: 15px;
            background: #f1f2f6; 
            border-radius: 20px; overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
            border: 1px solid white;
        }
        
        .evidence-img { 
            width: 100%; height: 100%; 
            display: block;
            transition: transform 0.5s;
        }

        .memory-text { 
            font-size: 1.1rem; line-height: 1.5; color: #636e72; 
            font-weight: 700; margin-bottom: 10px; 
        }
        
        .memory-author { 
            font-weight: 900; color: #ff7675; display: block; 
            font-size: 0.85rem; text-transform: uppercase; 
            letter-spacing: 1px; margin-bottom: 15px;
            background: #fff0f0; padding: 5px 15px; border-radius: 20px;
            display: inline-block;
        }

        .connector-line { height: 30px; width: 4px; background: #dfe6e9; margin: 0 auto 15px auto; border-radius: 10px; }

        /* --- THE STORY REVEAL --- */
        .conclusion-box {
            display: none; animation: backInUp 0.6s;
            background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%);
            padding: 25px; border-radius: 25px; color: white;
            width: 100%; box-sizing: border-box;
            box-shadow: 0 10px 25px rgba(108, 92, 231, 0.4);
        }

        .narrative-text {
            font-size: 1.15rem; color: #fff; margin-bottom: 20px; font-weight: 700;
            line-height: 1.4; text-shadow: 0 1px 3px rgba(0,0,0,0.15);
        }

        .verdict-reveal {
            background: white; padding: 15px; border-radius: 20px;
            display: inline-block; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            color: #2d3436; transform: rotate(-2deg);
        }

        .verdict-icon { font-size: 3.5rem; display: block; margin-bottom: 5px; animation: bounce 2s infinite; }
        .verdict-title { font-family: 'Fredoka One', cursive; font-size: 1.6rem; color: #6c5ce7; text-transform: uppercase; }
        
        /* --- BUTTONS --- */
        .btn-style {
            background: linear-gradient(45deg, #FF9A9E, #FECFEF); border: none; color: #d63031;
            padding: 15px 30px; font-family: 'Nunito', sans-serif; font-weight: 900; letter-spacing: 0.5px;
            font-size: 1.1rem; cursor: pointer; transition: 0.3s;
            border-radius: 50px; box-shadow: 0 5px 15px rgba(255, 154, 158, 0.4);
            width: 100%;
        }
        .btn-style:hover { transform: scale(1.02); box-shadow: 0 8px 20px rgba(255, 154, 158, 0.6); background: white; }

        .next-btn {
            background: white; color: #6c5ce7; 
            display: none; margin-top: 15px;
        }

        /* --- MAP TOOLTIPS --- */
        .location-tooltip {
            background: #fff; border: 3px solid #6c5ce7; color: #6c5ce7;
            font-family: 'Nunito', sans-serif; font-weight: 900;
            font-size: 15px; padding: 8px 15px; border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .leaflet-tooltip-left:before, .leaflet-tooltip-right:before { border: none !important; }

        .pulse-icon {
            background: #FF7675; border-radius: 50%;
            box-shadow: 0 0 0 0 rgba(255, 118, 117, 1);
            animation: pulse-ring 2s infinite;
        }
        @keyframes pulse-ring {
            0% { transform: scale(0.5); box-shadow: 0 0 0 0 rgba(255, 118, 117, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 20px rgba(255, 118, 117, 0); }
            100% { transform: scale(0.5); box-shadow: 0 0 0 0 rgba(255, 118, 117, 0); }
        }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }

    </style>
</head>
<body>

    <div id="map-background"></div>

    <div id="story-card-container">
        <div class="glass-card animate__animated animate__fadeInUp">
            
            <div style="font-size: 2.5rem; margin-bottom: 5px;">ðŸŽ‰</div>
            <div id="chapter-header" class="chapter-header">Trait #1</div>

            <div class="media-container">
                <img id="ev-img" class="evidence-img" src="" style="display:none;">
                <video id="ev-video" class="evidence-img" src="" controls style="display:none;"></video>
            </div>
            
            <div id="ev-text" class="memory-text"></div>
            <span id="ev-author" class="memory-author"></span>

            <div class="connector-line"></div>

            <button id="reveal-btn" class="btn-style" onclick="revealConclusion()">
                ðŸ¤” What does this reveal?
            </button>

            <div id="conclusion-container" class="conclusion-box">
                <div id="conc-narrative" class="narrative-text"></div>
                
                <div class="verdict-reveal">
                    <div class="verdict-icon" id="conc-icon"></div>
                    <div class="verdict-title" id="conc-title"></div>
                </div>
                <br>
                <button id="next-btn" class="btn-style next-btn" onclick="nextStory()">
                    Next Trait <i class="fas fa-arrow-right"></i>
                </button>
            </div>

        </div>
    </div>

    <script>
        // --- THE STORYLINE: Connecting Memory to Metaphor ---
        // css_fit: 'cover' (fills box) OR 'contain' (shows whole)
        // css_pos: 'center', 'top', 'bottom', 'center 20%'
        
        const storyline = [
            {
                chapter: "Trait #1: The Sole Protector",
                location: "ðŸ“ Munich Beach",
                mem_lat: 48.1319, mem_lng: 11.6019, 
                mem_img: "Images/aditi.jpeg",
                css_fit: "cover", css_pos: "center", // Aditi: Full Box
                mem_text: "At the beach party, I arrived late and hungry. Shashwat noticed immediately, ran to get me food, and didn't leave my side until I was fed.",
                mem_author: "Memory: Aditi",
                
                // The Logic connecting memory to object
                narrative: "He cushions the hard impact of life and supports your sole. He isn't a flashy high-heel that hurts you, he is...",
                conc_icon: "ðŸ‘Ÿ", conc_title: "Comfy Sneakers"
            },
            {
                chapter: "Trait #2: The Harmonizer",
                location: "ðŸ“ Porto, Portugal",
                mem_lat: 41.1579, mem_lng: -8.6291,
                mem_img: "Images/vinit.jpeg", 
                css_fit: "contain", css_pos: "center", // Vinit: Fit to box
                mem_text: "Even during the parking disaster in Porto when there was zero space and high stress...",
                mem_author: "Memory: Vinit",
                
                narrative: "When the world is screaming and chaotic, he doesn't toot his own horn. He just brings the sweet melody.",
                conc_icon: "ðŸªˆ", conc_title: "A Flute"
            },
            {
                chapter: "Trait #3: The Unpaid Intern",
                location: "ðŸ“ Vienna, Austria",
                mem_lat: 48.2082, mem_lng: 16.3738,
                mem_img: "Images/diksha.jpeg",
                mem_text: "When I was too drunk to remember anything, he made sure I got home safe. He has always been a blessing.",
                mem_author: "Memory: Diksha",
                css_fit: "cover", css_pos: "center 20%", // Diksha: Cut top/bottom

                narrative: "He works tirelessly for the betterment of society (us) without getting paid. If he wasn't an engineer, he'd be broke but happy as a...",
                conc_icon: "ðŸ¤", conc_title: "Social Worker"
            },
            {
                chapter: "Trait #4: The Texture Paradox",
                location: "ðŸ“ Innsbruck, Austria",
                mem_lat: 47.2692, mem_lng: 11.4041,
                mem_img: "Images/meghna.jpeg",
                mem_text: "Innsbruck, where it was a double dateâ€”only Shashwat didn't know it yet!",
                mem_author: "Memory: Meghna",
                css_fit: "cover", css_pos: "center 70%", // Meghna: Focus lower

                narrative: "He is a man of contradictions. In texts? He ghosts you (Tissue Paper - flaky). In person? He keeps you warm (Decathlon Fleece - quality).",
                conc_icon: "ðŸ§¥", conc_title: "Fleece & Tissue"
            },
            {
                chapter: "Trait #5: The Ink Flow",
                location: "ðŸ“ Reykjavik, Iceland",
                mem_lat: 64.1466, mem_lng: -21.9426,
                mem_img: "Images/srajit.jpeg",
                mem_text: "Making memories from Iceland to Portugal.",
                mem_author: "Memory: Srajit",
                css_fit: "cover", css_pos: "top center", // Srajit: Big

                narrative: "He flows smoothly, he never leaks secrets, and he leaves a permanent mark wherever he goes.",
                conc_icon: "ðŸ–Šï¸", conc_title: "Gel Pen"
            },
            {
                chapter: "Trait #6: The Ladies' Man",
                location: "ðŸ“ IIT Patna, India",
                mem_lat: 25.5358, mem_lng: 84.8511,
                mem_img: "Images/shreya.jpeg",
                mem_text: "Our group spent days and nights using the office space for parties and sleepovers, courtesy of him.",
                mem_author: "Memory: Shreya",
                css_fit: "cover", css_pos: "top center", // Shreya: Cut bottom

                narrative: "High prestige. High demand. And somehow, always surrounded by ladies. He is basically...",
                conc_icon: "ðŸŽ“", conc_title: "Delhi University"
            },
            {
                chapter: "Trait #7: The Clarity",
                location: "ðŸ“ London, UK",
                mem_lat: 51.5074, mem_lng: -0.1278,
                mem_img: "Images/disha.jpeg",
                mem_text: "Instead of being younger, he felt like an older brother who cares for me a lot.",
                mem_author: "Memory: Disha",
                css_fit: "cover", css_pos: "top center", // Disha: Cut bottom

                narrative: "When there is drama or dirt on the windshield of life, one spray of Shashwat wipes it all away. No streaks left behind.",
                conc_icon: "ðŸ§¼", conc_title: "Glass Cleaner"
            },
            {
                chapter: "Trait #8: The Reliable Ride",
                location: "ðŸ“ Santa Cruz, USA",
                mem_lat: 36.9741, mem_lng: -122.0308,
                mem_img: "Images/yun.jpeg",
                mem_text: "I love our Santa Cruz bonfire! Such a good memory.",
                mem_author: "Memory: Yun",
                css_fit: "cover", css_pos: "top center", // Yun: Cut bottom

                narrative: "High mileage friendship. Low maintenance. And an engine that never quits (just don't ask him to speed).",
                conc_icon: "ðŸš—", conc_title: "A Toyota"
            },
            {
                chapter: "Trait #9: The Ghost",
                location: "ðŸ“ Khada Danda Road",
                mem_lat: 25.6155, mem_lng: 85.1355,
                mem_img: "Images/hrisabh.jpeg", 
                mem_video: "Images/hrisabh.mp4",
                css_fit: "contain", css_pos: "center", // Video/Thumbnail: Keep full
                mem_text: "We have great memories on Khada Danda road, but trying to reach him afterwards is another story...",
                mem_author: "Memory: Hrishab",
                
                narrative: "You speak to him, but he doesn't speak back until 3 months later. He effectively functions as a vintage...",
                conc_icon: "ðŸ“±", conc_title: "Voicemail"
            },
            {
                chapter: "Trait #10: The Spotlight",
                location: "ðŸ“ Kerala, India",
                mem_lat: 9.9312, mem_lng: 76.2673,
                mem_img: "Images/saurabh.jpeg",
                mem_text: "Using a 'Nada' to tie his shorts... he unintentionally becomes the highlight of the trip.",
                mem_author: "Memory: Saurabh",
                css_fit: "contain", css_pos: "center", 

                narrative: "A normal sunflower looks for the light. Shashwat stands still wearing a Nada, and the spotlight finds HIM.",
                conc_icon: "ðŸŒ»", conc_title: "Reverse Sunflower"
            },
            {
                chapter: "Trait #11: The Softie",
                location: "ðŸ“ Hallstatt, Austria",
                mem_lat: 47.5622, mem_lng: 13.6493,
                mem_img: "Images/Ann.jpeg",
                mem_text: "Thanks for organising such a nice trip. It was smooth sailing.",
                mem_author: "Memory: Ann",
                css_fit: "contain", css_pos: "center",

                narrative: "He has no crunch, no hard shell, and no nuts (metaphorically). Just pure, soft sweetness.",
                conc_icon: "ðŸ«", conc_title: "Milkyway Bar"
            },
            {
                chapter: "Trait #12: The Natural",
                location: "ðŸ“ Munich, Germany",
                mem_lat: 48.1495, mem_lng: 11.5780,
                mem_img: "Images/nikita.jpeg",
                mem_text: "Munich: His house, his cooking, my appetite.",
                mem_author: "Memory: Nikita",
                css_fit: "contain", css_pos: "center",

                narrative: "He isn't neon or flashing lights. He is the color of grounding, cooking, and nature.",
                conc_icon: "ðŸŒ²", conc_title: "Forest Green"
            },
            {
                chapter: "Trait #13: The Protagonist",
                location: "ðŸ“ Marienplatz, Munich",
                mem_lat: 48.1374, mem_lng: 11.5755,
                mem_img: "Images/krishnan.jpeg",
                mem_text: "Trespassing into a closed restaurant just to play in the kids' area.",
                mem_author: "Memory: Krishnan",
                css_fit: "contain", css_pos: "center",

                narrative: "He doesn't need to act. One day, Hollywood will make a biopic about how nice (and crazy) he is.",
                conc_icon: "ðŸŽ¬", conc_title: "Movie Character"
            },
            {
                chapter: "Trait #14: The Electric Hug",
                location: "ðŸ“ Strasbourg, France",
                mem_lat: 48.5734, mem_lng: 7.7521,
                mem_img: "Images/nancy.jpeg",
                mem_text: "Strassburg and the starry nights with you.",
                mem_author: "Memory: Nancy",
                css_fit: "contain", css_pos: "center",

                narrative: "He is shocking...ly cute. No batteries required for his warmth.",
                conc_icon: "ðŸ¼", conc_title: "No-Battery Panda"
            },
            {
                chapter: "Trait #15: The Breeze",
                location: "ðŸ“ Munich Gym",
                mem_lat: 48.1439, mem_lng: 11.5475,
                mem_img: "Images/kara.jpeg",
                mem_text: "In the fitness studio when we learnt dancing.",
                mem_author: "Memory: Kara",
                css_fit: "contain", css_pos: "center",

                narrative: "You can't catch him, you can't hold him, but when he passes by, everything feels pleasant.",
                conc_icon: "ðŸƒ", conc_title: "September Wind"
            },
            {
                chapter: "Trait #16: The Foundation",
                location: "ðŸ“ Munich, Germany",
                mem_lat: 48.1492, mem_lng: 11.5774,
                mem_img: "Images/shivani.jpeg",
                mem_text: "He always made sure I never felt out of place whenever he was around.",
                mem_author: "Memory: Shivani",
                css_fit: "contain", css_pos: "center",

                narrative: "He isn't a flashy skyscraper. He is the concrete foundation that makes everyone else feel safe.",
                conc_icon: "â¤ï¸", conc_title: "Home Base"
            }
        ];

        // --- 2. MAP SETUP ---
        var map = L.map('map-background', {
            zoomControl: false, scrollWheelZoom: false, dragging: false
        }).setView([20,0], 2);

        // Fun Pastel Tiles
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '', maxZoom: 19
        }).addTo(map);

        let currentMarker = null;

        // --- 3. STORY ENGINE ---
        let currentIndex = 0;

        function loadStory(index) {
            const data = storyline[index];
            
            document.getElementById('chapter-header').innerText = data.chapter;
            
            const imgEl = document.getElementById('ev-img');
            const vidEl = document.getElementById('ev-video');
            
            // Apply SMART CROP Styles
            const fitStyle = data.css_fit || 'contain';
            const posStyle = data.css_pos || 'center';
            imgEl.style.objectFit = fitStyle;
            imgEl.style.objectPosition = posStyle;

            if (data.mem_video) {
                imgEl.style.display = 'none';
                vidEl.style.display = 'block';
                vidEl.src = data.mem_video;
            } else {
                vidEl.style.display = 'none';
                imgEl.style.display = 'block';
                imgEl.src = data.mem_img;
            }

            document.getElementById('ev-text').innerText = `"${data.mem_text}"`;
            document.getElementById('ev-author').innerText = data.mem_author;

            document.getElementById('conc-narrative').innerText = data.narrative;
            document.getElementById('conc-icon').innerText = data.conc_icon;
            document.getElementById('conc-title').innerText = data.conc_title;

            document.getElementById('reveal-btn').style.display = 'block';
            document.getElementById('conclusion-container').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('conclusion-container').classList.remove('animate__backInUp');

            // Scroll Top
            document.querySelector('.glass-card').scrollTop = 0;

            // Fly to location
            if(currentMarker) map.removeLayer(currentMarker);
            
            // Smart Padding to keep pin visible above card
            map.flyTo([data.mem_lat, data.mem_lng], 13, {
                animate: true, 
                duration: 2.5,
                paddingBottomLeft: [0, 450] // Push center UP
            });

            setTimeout(() => {
                let pulseIcon = L.divIcon({ className: 'pulse-icon', iconSize: [20,20] });
                currentMarker = L.marker([data.mem_lat, data.mem_lng], {icon: pulseIcon}).addTo(map);
                
                currentMarker.bindTooltip(data.location, {
                    permanent: true, direction: 'top', className: 'location-tooltip'
                }).openTooltip();

            }, 2500);
        }

        function revealConclusion() {
            document.getElementById('reveal-btn').style.display = 'none';
            const concBox = document.getElementById('conclusion-container');
            concBox.style.display = 'block';
            concBox.classList.add('animate__backInUp');
            document.getElementById('next-btn').style.display = 'inline-block';
            
            // Auto Scroll
            setTimeout(() => {
                const card = document.querySelector('.glass-card');
                card.scrollTo({ top: card.scrollHeight, behavior: 'smooth' });
            }, 100);
        }

        function nextStory() {
            currentIndex++;
            if(currentIndex < storyline.length) {
                loadStory(currentIndex);
            } else {
                alert("That's the end of the story! Happy Birthday Shashwat! ðŸŽ‚");
                currentIndex = 0;
                loadStory(0);
            }
        }

        // Initialize
        loadStory(0);

    </script>
</body>
</html>